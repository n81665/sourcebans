var CMTV_Code=window.CMTV_Code||{};
(function(c,b){CMTV_Code.CodeBlock_Resizer=XF.Element.newHandler({codeBlockH:null,gripPos:null,init:function(){this.codeBlockH=XF.Element.getHandler(this.$target.closest(".bbCodeBlock--code"),"CMTV-code-block")},visibleInit:function(){this.$target.removeClass("resizer--hidden");this.$target.on("mousedown touchstart",XF.proxy(this,"onResizeBegin"))},onResizeBegin:function(a){c("body").addClass("CMTV_Code_resizing");this.gripPos=this.getCursorPos(a)-this.codeBlockH.$codeContainer.offset().top-this.codeBlockH.$codeContainer.outerHeight();
b.addEventListener("mousemove",this,!1);b.addEventListener("mouseup",this,!1);b.addEventListener("touchmove",this,{passive:!1});b.addEventListener("touchend",this,{passive:!1})},onResizeMove:function(a){a.preventDefault();a=this.getCursorPos(a);this.codeBlockH.$codeContainer.css("height",a-this.codeBlockH.$codeContainer.offset().top-this.gripPos+"px")},handleEvent:function(a){switch(a.type){case "mousemove":case "touchmove":this.onResizeMove(a);break;case "mouseup":case "touchend":c("body").removeClass("CMTV_Code_resizing"),
b.removeEventListener("mousemove",this,!1),b.removeEventListener("mouseup",this,!1),b.removeEventListener("touchmove",this,{passive:!1}),b.removeEventListener("touchend",this,{passive:!1}),this.codeBlockH.getHeight(this.codeBlockH.$codeContainer)>this.codeBlockH.minHeight?this.codeBlockH.resizeButtons.$collapse.removeClass("action--hidden"):this.codeBlockH.resizeButtons.$collapse.addClass("action--hidden"),this.codeBlockH.getHeight(this.codeBlockH.$codeContainer,!0)<this.codeBlockH.maxHeight?this.codeBlockH.resizeButtons.$expand.removeClass("action--hidden"):
this.codeBlockH.resizeButtons.$expand.addClass("action--hidden")}},getCursorPos:function(a){return["mousedown","mousemove"].includes(a.type)?a.pageY:a.touches[0].pageY}});XF.Element.register("CMTV-code-block-resizer","CMTV_Code.CodeBlock_Resizer")})(jQuery,window);